<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Online Store</title>
  <link rel="stylesheet" href="/index.css">
</head>
<body>
  <div class="container">
    <header>
      <h1>ğŸ›ï¸ Online Store</h1>
      <div class="cart-info">
        <div class="cart-count"><%= cart.reduce((total, item) => total + item.quantity, 0); %>
        </div>
        <form action="/checkout" method="GET" style="margin: 0;">
          <button type="submit" class="checkout-btn">ğŸ›’ Checkout</button>
        </form>
      </div>
    </header>

    <% if (message) { %>
      <div class="message <%= message.includes('error') || message.includes('Error') ? 'error' : '' %>">
        <%= message %>
      </div>
    <% } %>

    <% if (products && products.length > 0) { %>
      <div class="products-grid">
        <% products.forEach(product => { %>
          <div class="product-card">
            <div class="product-header">
              <div class="product-name"><%= product.name %></div>
              <div class="product-price">$<%= parseFloat(product.price).toFixed(2) %></div>
            </div>
            <div class="product-body">
              <div class="product-description"><%= product.description || 'No description available' %></div>
              <div class="product-quantity">ğŸ“¦ Available: <%= product.quantity %></div>
              <form method="POST" action="/add-to-cart" class="add-to-cart-form">
                <input type="hidden" name="productId" value="<%= product.id %>">
                <input type="number" name="quantity" min="1" value="1" max="<%= product.quantity %>" style="width:80px;padding:8px;border-radius:4px;border:1px solid #ddd;">
                <button type="submit" class="add-to-cart-btn">Add to Cart</button>
              </form>
            </div>
          </div>
        <% }); %>
      </div>
    <% } else { %>
      <div class="no-products">
        <p>No products available at the moment. Please check back later!</p>
      </div>
    <% } %>

    <footer>
      <p>&copy; 2025 Online Store. All rights reserved.</p>
    </footer>
  </div>
</body>
</html>
